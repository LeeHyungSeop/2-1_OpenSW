#include <stdio.h>
#include <sys/types.h> // open()
#include <sys/stat.h>
#include <fcntl.h>
#include <errno.h> // errno 변수 사용 위해
#include <stdlib.h> // exit()
#include <unistd.h> // read()

        // argc : 개수 , argv : parameter 값
int main(int argc, char* argv[]) {

    if(argc != 2) { 
        printf("usage : opentest filename\n");
        exit(0); // not system call, library임-> program 종료, #include <stdlib.h>
    }

    printf("--------------------\n");
    printf("first parmaeter : %s\n", argv[0]); // 명령어 
    printf("second parmaeter : %s\n", argv[1]); // 첫번째 param

    int fd;
    fd = open(argv[1], O_RDONLY);

    if(fd == -1){ 
        perror("first open : ");
        exit(0);
    }
    else {
        printf("open success!\n");
        printf("Let's read\n\n");
    }

    char buf[50];
    read(fd, buf, 30);
    printf("%s", buf);

    close(fd);

    return 0;

}